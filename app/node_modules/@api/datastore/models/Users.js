const { Model, DataTypes } = require('sequelize')
const hash = require('@api/utils/hash')

module.exports = (sequelize) => {
  class Users extends Model {}

  Users.init({
    firstName: {
      type: DataTypes.STRING
    },

    lastName: {
      type: DataTypes.STRING
    },

    emailAddress: {
      type: DataTypes.STRING
    },

    password: {
      type: DataTypes.STRING,
      set (val) {
        this.setDataValue('password', hash(val))
      }
    }
  }, { sequelize })

  return Users
}
